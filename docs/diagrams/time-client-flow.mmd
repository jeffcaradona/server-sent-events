flowchart TD
    A[DOMContentLoaded] --> B[connect]
    B --> C[createEventSource]
    C --> D[attach handlers]
    D --> E[onerror]
    E --> F[log error]
    D --> G[onmessage]
    G --> H[handleTimeEvent]
    H -->|type: shutdown| I[close connection]
    H -->|type: utc| J[log time]
    H -->|type: error| K[log server error]
    H -->|invalid| L[log invalid event]